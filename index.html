<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ZXC[STREAM]</title>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css"
    />
    <link
      href="https://api.fontshare.com/v2/css?f[]=bespoke-stencil@400,500,700&amp;display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.1/css/all.min.css"
      integrity="sha512-5Hs3dF2AEPkpNAR7UiOHba+lRSJNeM2ECkwxUIxC1Q/FLycGTbNapWXB4tP889k5T5Ju8fs4b1P5z/iB4nMfSQ=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Afacad+Flux:wght@100..1000&family=Montserrat:ital,wght@0,100..900;1,100..900&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap"
      rel="stylesheet"
    />
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        user-select: none;
        font-family: "Montserrat";
        /* border: 1px solid red; */
      }
      a {
        text-decoration: none;
        color: #e8e8e8;
      }
      html {
        background-color: black;
      }
      body::-webkit-scrollbar {
        display: none;
      }
      main {
        position: relative;
        min-height: 100vh;
        width: 100%;
        display: flex;
        justify-content: center;
        flex-direction: column;
        background: #0d0d0d;
        max-width: 1900px;
        margin: 0 auto;
        overflow: hidden;
      }
      .landingPage {
        position: relative;
        height: 37rem;
        width: 100%;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        background: #e8e8e8;
        overflow: hidden;
      }
      .swiper-slide {
        display: flex;
        justify-content: center;
        align-items: center;
      }
      .backdropContainer {
        position: absolute;
        width: 100%;
        height: 100%;
        overflow: hidden;
        background: #0d0d0d;
      }

      .unmuteButton {
        color: #e8e8e8;
        cursor: pointer;
        font-size: 1.5rem;
        opacity: 0;
        filter: blur(10px);
        pointer-events: none;
        transition: 0.3s;
        transition-delay: 10.2s;
      }

      .backdrop-slide::after {
        content: "";
        height: 100%;
        width: 100%;
        position: absolute;
        z-index: 2;
        background: linear-gradient(#0d0d0d2f, #0d0d0d);
        pointer-events: none;
      }
      .backdropStyle,
      .posterStyle {
        height: 100%;
        width: 100%;
        object-fit: cover;
        object-position: center;
      }
      .backdrop-slide {
        opacity: 0;
        filter: blur(10px);
        transition: 0.3s;
        overflow: hidden;
      }

      .posterContainer {
        position: absolute;
        height: 280px;
        width: 210px;
        align-items: center;
        justify-content: center;
        z-index: 1;
        display: none;
        pointer-events: none;
      }
      .swiper-slide.poster-slide {
        height: 100%;
        width: 100%;
        border-radius: 12px;
        overflow: hidden;
        transition: 0.5s;
        transform: scale(0.85);
        filter: blur(10px);
      }
      .poster-slide.swiper-slide-active {
        transform: scale(1.1);

        filter: blur(0px);
      }
      .poster-slide.swiper-slide-prev {
        transform: scale(0.95);
        filter: blur(0px);
      }
      .poster-slide.swiper-slide-next {
        transform: scale(0.95);

        filter: blur(0px);
      }
      .landingMetadata {
        position: absolute;
        display: flex;
        flex-direction: column;
        width: 50%;
        gap: 13px;
        left: 50px;
        bottom: 0;
        z-index: 3;
        color: #e8e8e8;
        transform: translateY(50%);
        filter: blur(10px);
        opacity: 0;
        transition: 0.5s ease-out;
      }
      .landingMetadata h1 {
        font-size: 3rem;
        font-weight: 400;
        text-transform: uppercase;
      }
      .landingMetadata i {
        color: goldenrod;
      }

      .backdrop-slide.swiper-slide-active {
        opacity: 1;
        filter: blur(0);

        .unmuteButton {
          opacity: 1;
          filter: blur(0);
          pointer-events: all;
        }
        .landingMetadata {
          transform: translateY(0);
          filter: blur(0);
          opacity: 1;
        }
      }
      .landingLogoContainer {
        width: 50%;
        display: flex;
        justify-content: center;
        align-items: center;
        margin-bottom: 20px;
      }
      .logoStyle {
        height: 100%;
        width: 100%;
        object-fit: contain;
      }
      .landingTrailer {
        position: absolute;
        z-index: 2;
        height: 130%;
        width: 100%;
        border: none;
        pointer-events: none;
      }
      .showDetailsContainer {
        display: flex;
        align-items: center;
        gap: 10px;
        font-weight: 500;
      }
    </style>
  </head>
  <body>
    <main>
      <style>
        header {
          position: absolute;
          top: 0;
          min-height: 60px;
          width: 100%;
          color: whitesmoke;
          z-index: 99;
          padding: 10px;
          display: flex;
          justify-content: space-around;
          background: #0d0d0d28;
          flex-wrap: wrap;
          backdrop-filter: blur(10px);
          box-shadow: 0 0 2px 1px #0d0d0d85;
        }

        .brandLogoContainer {
          position: relative;
          width: 300px;
          height: 40px;
          display: flex;
          justify-content: center;
          align-items: center;
        }
        .brandLogoContainer img {
          position: absolute;
          height: 100%;
          width: 100%;
          object-fit: contain;
          z-index: 1;
        }
        .brandLogoContainer h1 {
          font-family: "Bespoke Stencil";
          position: absolute;
          font-size: 2rem;
          opacity: 0.5;
          letter-spacing: 2px;
          filter: drop-shadow(0 0 1px rgb(8, 8, 8));
        }

        .movies,
        .tvSeries,
        .searchFunction,
        .home {
          display: flex;
          gap: 10px;
          justify-content: center;
          align-items: center;
        }
        nav {
          display: flex;
          align-items: center;
          justify-content: space-between;
          padding: 10px;
          color: whitesmoke;
          width: 40%;
        }
      </style>
      <header>
        <div class="brandLogoContainer">
          <img
            style="filter: drop-shadow(0 0 1px rgb(33, 33, 33))"
            src="https://i.ibb.co/n0c3gXW/1.png"
          />
          <h1>[STREAM]</h1>
        </div>

        <nav>
          <div class="home">
            <div class="sidebar-logo">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="24"
                height="24"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
                class="lucide lucide-home"
              >
                <path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
                <polyline points="9 22 9 12 15 12 15 22"></polyline>
              </svg>
            </div>
            <p>Home</p>
          </div>
          <a href="/movie.html" class="movies">
            <div class="sidebar-logo">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="24"
                height="24"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
                class="lucide lucide-clapperboard"
              >
                <path
                  d="M20.2 6 3 11l-.9-2.4c-.3-1.1.3-2.2 1.3-2.5l13.5-4c1.1-.3 2.2.3 2.5 1.3Z"
                ></path>
                <path d="m6.2 5.3 3.1 3.9"></path>
                <path d="m12.4 3.4 3.1 4"></path>
                <path d="M3 11h18v8a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2Z"></path>
              </svg>
            </div>
            <p>Movies</p>
          </a>
          <a href="/tv.html" class="tvSeries">
            <div class="sidebar-logo">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="24"
                height="24"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
                class="lucide lucide-tv"
              >
                <rect width="20" height="15" x="2" y="7" rx="2" ry="2"></rect>
                <polyline points="17 2 12 7 7 2"></polyline>
              </svg>
            </div>
            <p>Series</p>
          </a>
          <a href="/search.html" class="searchFunction">
            <div class="sidebar-logo">
              <svg
                stroke="currentColor"
                fill="currentColor"
                stroke-width="0"
                viewBox="0 0 24 24"
                class="style_inactive__EPRfk"
                height="24"
                width="24"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M11 2C15.968 2 20 6.032 20 11C20 15.968 15.968 20 11 20C6.032 20 2 15.968 2 11C2 6.032 6.032 2 11 2ZM11 18C14.8675 18 18 14.8675 18 11C18 7.1325 14.8675 4 11 4C7.1325 4 4 7.1325 4 11C4 14.8675 7.1325 18 11 18ZM19.4853 18.0711L22.3137 20.8995L20.8995 22.3137L18.0711 19.4853L19.4853 18.0711Z"
                ></path>
              </svg>
            </div>
            <p>Search</p>
          </a>
        </nav>
      </header>
      <section id="landingPage" class="landingPage">
        <div class="backdropContainer">
          <div id="backdropWrapper" class="swiper-wrapper"></div>
        </div>
        <div class="posterContainer">
          <div id="posterWrapper" class="swiper-wrapper"></div>
        </div>
      </section>
      <style>
        .top-ten-container {
          position: relative;
          display: flex;
          align-items: center;
          color: white;
          /* border: 1px solid red; */
          max-width: 95%;
          margin: 0 auto;
          width: 95%;
        }
        .top-ten-text {
          position: relative;
          font-family: "Afacad Flux";
          font-weight: 800;
          font-size: clamp(0.95rem, 2rem + 8.9041vw, 7.5rem);
          -webkit-text-stroke: 2px rgb(255, 17, 17);
          -webkit-text-fill-color: transparent;
        }
        .top-ten-text::after {
          content: "";
          position: absolute;
          left: 0;
          height: 100%;
          width: 100%;
          background: linear-gradient(90deg, rgba(0, 0, 0, 0), #0d0d0df7 90%);
        }
        .top-ten-text:nth-child(2),
        .top-ten-text:nth-child(3),
        .top-ten-text:nth-child(4),
        .top-ten-text:nth-child(5) {
          margin-left: -20px;
        }
        .onzxcstream {
          position: relative;
          font-size: clamp(1rem, 1rem + 2vw, 2.4rem);
          font-weight: 700;
          letter-spacing: 3px;
          word-spacing: 5px;
          color: #8d0e0e;
        }
        .onzxcstream::before {
          content: "";
          position: absolute;
          height: 100%;
          width: 100%;
          z-index: 1;
          background: linear-gradient(90deg, rgba(0, 0, 0, 0), #0d0d0d8c 95%);
        }

        .wrapper-topten {
          display: flex;
          align-items: center;
          height: calc(100% - 180px);
          width: 100%;
          z-index: 99;
        }

        .top-ten-slides {
          width: 100%;
          display: flex;
          justify-content: center;
          align-items: center;
        }
        .slide-topTen {
          position: relative;
          height: 220px;
          width: 400px;
          filter: blur(5px);
          transition: filter 0.5s;
        }
        .slide-topTen:hover {
          z-index: 99;
        }
        .toptenimg {
          height: 100%;
          width: 100%;
          object-fit: cover;
          border-radius: 12px;
          transition: 0.2s;
          background: rgb(220, 220, 220);
          box-shadow: 0 0 15px 1px rgb(6, 6, 6);
        }
        .slide-topTen:hover .toptenimg {
          transform: scale(1.06);
        }
        .numbering {
          position: relative;
          font-family: "Roboto";
          font-size: 8rem;
          position: absolute;
          z-index: -1;
          left: -55px;
          bottom: 0;
          -webkit-text-stroke: 2px rgb(255, 17, 17);
          -webkit-text-fill-color: transparent;
          transition: 0.5s;
          filter: drop-shadow(0 0 2px #0d0d0d);
        }
        .slide-topTen:hover .numbering {
          -webkit-text-fill-color: rgb(255, 17, 17);
          transform: translateX(-25%) scale(1.1);
        }
        .numbering::before {
          content: "";
          position: absolute;
          height: 100%;
          width: 100%;
          z-index: 1;
          background: linear-gradient(90deg, rgba(0, 0, 0, 0), #0d0d0df7 80%);
          transition: 0.5s;
        }
        .slide-topTen:hover .numbering::before {
          background: linear-gradient(90deg, rgba(0, 0, 0, 0), #0d0d0df7 95%);
        }
        .slide-topTen.swiper-slide-active,
        .slide-topTen.swiper-slide-prev,
        .slide-topTen.swiper-slide-next {
          filter: blur(0);
        }
        .topTen {
          height: 75vh;
          background: #0d0d0d;
          display: flex;
          justify-content: center;
          flex-direction: column;
          gap: 60px;
        }
        /* .top-ten-slides {
          opacity: 0;
          transform: translateY(50%);
          filter: blur(10px);
          transition: 0.7s ease-in-out;
        } */
      </style>
      <div class="topTen">
        <div class="top-ten-container">
          <h1 class="top-ten-text">T</h1>
          <h1 class="top-ten-text">O</h1>
          <h1 class="top-ten-text">P</h1>
          <h1 class="top-ten-text">1</h1>
          <h1 class="top-ten-text">0</h1>
          <div class="onzxcstream-container">
            <p class="onzxcstream">
              ON <br />
              ZXC[STREAM]
            </p>
          </div>
        </div>
        <div class="top-ten-slides">
          <div class="swiper-wrapper wrapper-topten"></div>
        </div>
      </div>
      <style>
        .companiesContainer {
          min-height: 100vh;
          width: 100%;
          background: hsl(0, 0%, 4%);
          display: flex;
          flex-direction: column;
          gap: 90px;
          padding: 50px 10px;
        }
        .logoCompanyImg {
          width: 18%;
        }
        .companySlide {
          position: relative;
          height: 230px;
          width: 400px;
          color: whitesmoke;
          border-radius: 12px;
          overflow: hidden;
        }
        .companySlide img {
          height: 100%;
          width: 100%;
          object-fit: cover;
          transition: 0.3s ease-out;
        }

        .companySlide:hover img {
          transform: scale(1.1);
        }

        .network-section {
          /* background: red; */
          display: flex;
          flex-direction: column;
          justify-content: center;
          gap: 20px;
          width: 100%;
          overflow: hidden;
        }
        .companySlide p {
          position: absolute;
          bottom: 0;
          font-size: 1.5rem;
          padding: 10px;
        }
        .swiper-container {
          display: flex;
          flex-direction: column;
          justify-content: center;
          align-items: center;
        }
        @media only screen and (max-width: 768px) {
          .landingTrailer {
            transform: scale(2);
          }
          .brandLogoContainer {
            display: none;
          }
          nav {
            flex-grow: 1;
            font-size: 0.8rem;
          }
          .landingPage {
            height: 70vh;
          }
          .posterContainer {
            display: flex;
          }

          .landingMetadata {
            width: 90%;
            gap: 10px;
            left: unset;
            bottom: 0;
            align-items: center;

            p,
            h1,
            .logoStyle {
              display: none;
            }
            i {
              text-align: center;
            }
          }
          .slide-topTen,
          .companySlide {
            height: 150px;
            width: 260px;
          }
          .top-ten-text:nth-child(2),
          .top-ten-text:nth-child(3),
          .top-ten-text:nth-child(4),
          .top-ten-text:nth-child(5) {
            margin-left: -5px;
          }
          .topTen {
            height: 50vh;
          }
          .companiesContainer {
            gap: 60px;
          }
          .logoCompanyImg {
            width: 30%;
          }
          .showDetailsContainer {
            justify-content: center;
          }
          svg {
            display: none;
          }
          .top-ten-text,
          .numbering {
            -webkit-text-stroke: 1px rgb(255, 17, 17);
          }
        }
      </style>
      <div class="companiesContainer"></div>
      <footer
        style="
          height: 90px;
          width: 100%;
          display: flex;
          justify-content: center;
          align-items: center;
          background: #0d0d0d;
          color: #e8e8e8;
        "
      >
        &#169; 2024 ZXC[STREAM] All rights reserved.
      </footer>
    </main>
  </body>
  <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
  <script>
    const apiKey = "47a1a7df542d3d483227f758a7317dff";
    const landingPage = document.getElementById("landingPage");
    const backdropWrapper = document.getElementById("backdropWrapper");
    const posterWrapper = document.getElementById("posterWrapper");

    const showlist = [
      { id: "124364", media_type: "tv" },
      { id: "1184918", media_type: "movie" },
      { id: "945961", media_type: "movie" },
      { id: "94605", media_type: "tv" },
      { id: "1100782", media_type: "movie" },
      { id: "744857", media_type: "movie" },
      { id: "913290", media_type: "movie" },
    ];

    async function fetchShows(id, mediaType) {
      const response = await fetch(
        `https://api.themoviedb.org/3/${mediaType}/${id}?api_key=${apiKey}`
      );
      const data = await response.json();
      const title = data.title || data.name;
      const tagline = data.tagline || "";
      const overview = data.overview || "";
      const genre = data.genres[0];
      const genreName = genre.name;
      const yearReleased =
        (data.release_date || data.first_air_date)?.split("-")[0] || "Unknown";

      const runtimeInMinutes = data.runtime;
      const runtime = runtimeInMinutes
        ? `${Math.floor(runtimeInMinutes / 60)}h ${runtimeInMinutes % 60}m`
        : `S${data.number_of_seasons}E${data.number_of_episodes}`;

      const backdrop = await fetchImages(id, mediaType, "defaultBackdrop");

      const logo = await fetchImages(id, mediaType, "englishLogo");

      const poster = await fetchImages(id, mediaType, "posterImage");

      const trailerUrl = await fetchTrailer(id, mediaType);

      displayLanding(
        id,
        title,
        tagline,
        overview,
        backdrop,
        poster,
        logo,
        trailerUrl,
        genreName,
        yearReleased,
        runtime
      );
    }

    async function displayLanding(
      id,
      title,
      tagline,
      overview,
      backdrop,
      poster,
      logo,
      trailer,
      genreName,
      yearReleased,
      runtime
    ) {
      const landingMetadata = document.createElement("div");
      landingMetadata.className = "landingMetadata";

      const landingLogoContainer = document.createElement("div");
      landingLogoContainer.className = "landingLogoContainer";

      const backdropSlider = document.createElement("div");
      const backdropImage = document.createElement("img");
      backdropSlider.className = "swiper-slide backdrop-slide";
      backdropImage.className = "backdropStyle";
      backdropImage.dataset.src = backdrop;
      backdropImage.classList.add("lazy-load");
      backdropImage.alt = title;

      const landingLogo = document.createElement("img");
      landingLogo.className = "logoStyle";
      landingLogo.dataset.src = logo;
      landingLogo.classList.add("lazy-load");

      const landingTitle = document.createElement("h1");
      const landingTagline = document.createElement("i");
      const landingOverview = document.createElement("p");
      landingTitle.innerText = title;
      landingTagline.innerText = tagline;
      landingOverview.innerText = overview;

      const showDetailsContainer = document.createElement("div");
      showDetailsContainer.className = "showDetailsContainer";

      showDetailsContainer.innerHTML = `
      <h5>${genreName}</h5> |
      <h5>${yearReleased}</h5> |
      <h5>${runtime}</h5>
      `;

      const posterSlider = document.createElement("div");
      const posterImage = document.createElement("img");
      posterSlider.className = "swiper-slide poster-slide";
      posterImage.className = "posterStyle";
      posterImage.dataset.src = poster;
      posterImage.alt = title;
      posterImage.classList.add("lazy-load");

      const landingTrailer = document.createElement("iframe");
      landingTrailer.className = "landingTrailer";
      landingTrailer.dataset.trailerSrc = trailer; // Store trailer link in a data attribute.
      landingTrailer.src = ""; // Initially empty, set dynamically when active.
      landingTrailer.frameBorder = "0";
      landingTrailer.allow =
        "accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture";
      landingTrailer.allowFullscreen = true;

      const unmuteButton = document.createElement("div");
      unmuteButton.className = "unmuteButton";
      unmuteButton.innerHTML = `<i class="fa-solid fa-volume-xmark"></i>`;
      unmuteButton.addEventListener("click", () => {
        if (landingTrailer.src.includes("&mute=1")) {
          // Unmute: Remove the mute parameter
          landingTrailer.src = landingTrailer.src.replace("&mute=1", "");
          unmuteButton.innerHTML = `<i class="fa-solid fa-volume-high"></i>`; // Update button text
        } else {
          // Mute: Add the mute parameter
          if (!landingTrailer.src.includes("&mute=1")) {
            landingTrailer.src += "&mute=1";
          }
          unmuteButton.innerHTML = `<i class="fa-solid fa-volume-xmark"></i>`; // Update button text
        }
      });

      posterSlider.appendChild(posterImage);
      posterWrapper.appendChild(posterSlider);

      landingLogoContainer.appendChild(landingLogo);
      landingMetadata.appendChild(landingLogoContainer);
      landingMetadata.appendChild(landingTagline);
      landingMetadata.appendChild(landingTitle);

      landingMetadata.appendChild(showDetailsContainer);
      landingMetadata.appendChild(landingOverview);
      landingMetadata.appendChild(unmuteButton);
      backdropSlider.appendChild(landingTrailer);
      backdropSlider.appendChild(landingMetadata);
      backdropSlider.appendChild(backdropImage);
      backdropWrapper.appendChild(backdropSlider);
    }

    async function fetchTrailer(id, mediaType) {
      try {
        const url = `https://api.themoviedb.org/3/${mediaType}/${id}/videos?api_key=${apiKey}&language=en-US`;
        const response = await fetch(url);
        const data = await response.json();
        const trailer = data.results.find(
          (video) => video.type === "Trailer" && video.site === "YouTube"
        );
        return trailer
          ? `https://www.youtube.com/embed/${trailer.key}?autoplay=1&mute=1&loop=1&playlist=${trailer.key}`
          : `https://www.youtube.com/embed/xvFZjo5PgG0?si=3ucZG5-81DePDvtrD`;
      } catch (error) {
        console.error("Error fetching trailer:", error);
        return "Error fetching trailer";
      }
    }

    async function fetchImages(id, mediaType, returnType) {
      const response = await fetch(
        `https://api.themoviedb.org/3/${mediaType}/${id}/images?api_key=${apiKey}`
      );
      const data = await response.json();
      const normal = data.backdrops.find((meow) => meow.iso_639_1 === null);
      const normalUrl = normal
        ? `https://image.tmdb.org/t/p/original/${normal.file_path}`
        : "https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEibeodCS7BPOb9g45oi5UXnHI4lwGJECVpkbQTTZOSV4YTNkOWzY__ZQITNna1nBEiXMcATjNM20xtsKXbRPvejk1Rek-bRsp-ZiwOI5vyWMhYC_AEQodd_otWepiHkpG9zJCd0iABhb1iFFRuJXE6mSyWhy0xpQdv8IIZoOAl8aI1QBc4gRQxfvqim/s1600/%5BZXC%20STREAM%5D11.jpg";
      const poster = data.posters.find((meow) => meow.iso_639_1 === "en");
      const posterUrl = poster
        ? `https://image.tmdb.org/t/p/w500/${poster.file_path}`
        : "https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEibeodCS7BPOb9g45oi5UXnHI4lwGJECVpkbQTTZOSV4YTNkOWzY__ZQITNna1nBEiXMcATjNM20xtsKXbRPvejk1Rek-bRsp-ZiwOI5vyWMhYC_AEQodd_otWepiHkpG9zJCd0iABhb1iFFRuJXE6mSyWhy0xpQdv8IIZoOAl8aI1QBc4gRQxfvqim/s1600/%5BZXC%20STREAM%5D11.jpg";

      const english = data.backdrops.find((meow) => meow.iso_639_1 === "en");
      const englishUrl = english
        ? `https://image.tmdb.org/t/p/w500/${english.file_path}`
        : normalUrl ||
          posterUrl ||
          "https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEibeodCS7BPOb9g45oi5UXnHI4lwGJECVpkbQTTZOSV4YTNkOWzY__ZQITNna1nBEiXMcATjNM20xtsKXbRPvejk1Rek-bRsp-ZiwOI5vyWMhYC_AEQodd_otWepiHkpG9zJCd0iABhb1iFFRuJXE6mSyWhy0xpQdv8IIZoOAl8aI1QBc4gRQxfvqim/s1600/%5BZXC%20STREAM%5D11.jpg";
      const englishLogo = data.logos.find((meow) => meow.iso_639_1 === "en");
      const englishLogoUrl = englishLogo
        ? `https://image.tmdb.org/t/p/w500/${englishLogo.file_path}`
        : "https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEibeodCS7BPOb9g45oi5UXnHI4lwGJECVpkbQTTZOSV4YTNkOWzY__ZQITNna1nBEiXMcATjNM20xtsKXbRPvejk1Rek-bRsp-ZiwOI5vyWMhYC_AEQodd_otWepiHkpG9zJCd0iABhb1iFFRuJXE6mSyWhy0xpQdv8IIZoOAl8aI1QBc4gRQxfvqim/s1600/%5BZXC%20STREAM%5D11.jpg";

      if (returnType === "englishBackdrop") {
        return englishUrl;
      } else if (returnType === "englishLogo") {
        return englishLogoUrl;
      } else if (returnType === "defaultBackdrop") {
        return normalUrl;
      } else if (returnType === "posterImage") {
        return posterUrl;
      }
    }

    function initSwipers() {
      const backdropSwiper = new Swiper(".backdropContainer", {
        slidesPerView: "auto",
        loop: true,
        autoplay: {
          delay: 5000,
          disableOnInteraction: true,
        },
      });

      // Initialize the poster swiper
      const posterSwiper = new Swiper(".posterContainer", {
        slidesPerView: "1",
        loop: true,
        spaceBetween: 20,
        centeredSlides: "true",
        loopedSlides: 3,

        controller: {
          control: backdropSwiper,
        },
      });

      backdropSwiper.controller.control = posterSwiper;

      const updateTrailerForActiveSlide = () => {
        const allSlides = document.querySelectorAll(".backdrop-slide");
        allSlides.forEach((slide) => {
          const iframe = slide.querySelector(".landingTrailer");
          if (iframe) {
            if (slide.classList.contains("swiper-slide-active")) {
              setTimeout(() => {
                iframe.src = iframe.dataset.trailerSrc; // Set trailer source for the active slide.
              }, 10000); // Delay for 3 seconds (adjust as needed)
            } else {
              iframe.src = ""; // Clear the source for non-active slides.
            }
          }
        });
      };

      // Listen for changes in the active slide.
      backdropSwiper.on(
        "slideChangeTransitionEnd",
        updateTrailerForActiveSlide
      );

      // Initialize the trailer for the initial active slide.
      updateTrailerForActiveSlide();
    }

    async function landingShows(showlist) {
      for (const meow of showlist) {
        await fetchShows(meow.id, meow.media_type);
      }
      initSwipers();
      tamad();
    }

    async function fetchWeekly() {
      const ENendpoint = `https://api.themoviedb.org/3/movie/popular?api_key=${apiKey}`;
      try {
        const response = await fetch(ENendpoint);
        if (!response.ok) {
          throw new Error("Not Found");
        }
        const data = await response.json();
        for (const [index, meow] of data.results.slice(0, 10).entries()) {
          const number = index + 1;
          const title = meow.title || meow.name;
          const mediaType = "movie";
          const mediaId = meow.id;

          const englishBD = await fetchImages(
            meow.id,
            mediaType,
            "englishBackdrop"
          );

          displayEnglish(englishBD, title, number);
        }
      } catch (error) {
        console.error(error.message);
      }
      swiperIni2();
      tamad();
    }
    function swiperIni2() {
      const swiper2 = new Swiper(".top-ten-slides", {
        slidesPerView: "auto",
        loop: true,
        centeredSlides: true,
        initialSlide: 1, // Start from the second slide
        spaceBetween: 52,
        mousewheel: false, // Enable mousewheel control
      });
    }
    function displayEnglish(englishBackdropUrl, title, number) {
      const toptenwrapper = document.querySelector(".wrapper-topten");
      const topTenSlide = document.createElement("div");
      topTenSlide.classList.add("swiper-slide", "slide-topTen");

      topTenSlide.innerHTML = `
            <h1 class="numbering">${number}</h1>
            <img class="toptenimg lazy-load" data-src="${englishBackdropUrl}">
          `;

      toptenwrapper.appendChild(topTenSlide);
    }

    const companies = [
      {
        networkId: "213",
        logoLink:
          "https://upload.wikimedia.org/wikipedia/commons/7/7a/Logonetflix.png",
      },
      {
        networkId: "6219",
        logoLink:
          "https://upload.wikimedia.org/wikipedia/commons/4/49/MGM%2B_logo.svg",
      },
      {
        networkId: "1024",
        logoLink:
          "https://upload.wikimedia.org/wikipedia/commons/1/11/Amazon_Prime_Video_logo.svg",
      },

      {
        networkId: "2739",
        logoLink:
          "https://upload.wikimedia.org/wikipedia/commons/3/3e/Disney%2B_logo.svg",
      },
      {
        networkId: "2552",
        logoLink:
          "https://upload.wikimedia.org/wikipedia/commons/2/28/Apple_TV_Plus_Logo.svg",
      },
      {
        networkId: "3353",
        logoLink:
          "https://upload.wikimedia.org/wikipedia/commons/d/d3/NBCUniversal_Peacock_Logo.svg",
      },
      {
        networkId: "13",
        logoLink:
          "https://upload.wikimedia.org/wikipedia/commons/7/7a/Nickelodeon_2009_logo.svg",
      },
    ];
    async function companiesLoop() {
      for (const company of companies) {
        await fetchCompanies(company.networkId, company.logoLink);
        // await new Promise((resolve) => setTimeout(resolve, 1));
      }
      tamad();
    }
    async function fetchCompanies(networkId, networkLogoLink) {
      const mediaType = "tv";
      const endpoint = `https://api.themoviedb.org/3/discover/${mediaType}?api_key=${apiKey}&with_networks=${networkId}`;

      try {
        const response = await fetch(endpoint);
        if (!response.ok) {
          throw new Error("Error fetching network data");
        }
        const data = await response.json();
        const series = await Promise.all(
          data.results.map(async (seriesItem) => {
            // console.log(seriesItem);

            const englishBackdropUrl = await fetchImages(
              seriesItem.id,
              mediaType,
              "englishBackdrop"
            );

            return {
              id: seriesItem.id,
              overview: seriesItem.overview,
              plainbackdropUrl: `https://image.tmdb.org/t/p/w1280/${seriesItem.backdrop_path}`,
              posterUrl: `https://image.tmdb.org/t/p/w1280/${seriesItem.poster_path}`,
              name: seriesItem.name,
              backdropUrl: englishBackdropUrl,
              mediaType: mediaType,
              voteAverage: seriesItem.vote_average,
              yearReleased: seriesItem.first_air_date,
              countryOrigin: seriesItem.origin_country[0],
            };
          })
        );

        displayCompanies(networkId, networkLogoLink, series);
      } catch (error) {
        console.error(error);
      }
    }
    function displayCompanies(networkId, logoLink, series) {
      const companiesContainer = document.querySelector(".companiesContainer");
      // Create network section
      const networkSection = document.createElement("div");
      networkSection.classList.add("network-section");

      // Add network logo
      const logoImg = document.createElement("img");
      logoImg.className = "logoCompanyImg";
      logoImg.dataset.src = logoLink;
      logoImg.alt = "Network Logo";
      logoImg.classList.add("lazy-load");

      // Create Swiper container
      const swiperContainer = document.createElement("div");
      swiperContainer.classList.add("swiper-container");
      swiperContainer.id = `swiper-${networkId}`;

      const swiperWrapper = document.createElement("div");
      swiperWrapper.classList.add("swiper-wrapper");

      // Populate Swiper with series
      series.forEach((seriesItem) => {
        if (seriesItem.backdropUrl) {
          const swiperSlide = document.createElement("div");
          swiperSlide.className = "companySlide";
          swiperSlide.classList.add("swiper-slide");

          const backdropImg = document.createElement("img");
          backdropImg.dataset.src = seriesItem.backdropUrl;
          backdropImg.alt = seriesItem.name;
          backdropImg.classList.add("lazy-load");

          const seriesName = document.createElement("p");
          seriesName.textContent = seriesItem.name;

          swiperSlide.appendChild(backdropImg);
          swiperSlide.appendChild(seriesName);
          swiperWrapper.appendChild(swiperSlide);
          console.log();
          // swiperSlide.addEventListener("click", () => {
          //   modal(
          //     seriesItem.id,
          //     seriesItem.overview,
          //     seriesItem.plainbackdropUrl,
          //     seriesItem.posterUrl,
          //     seriesItem.name,
          //     seriesItem.mediaType,
          //     seriesItem.voteAverage,
          //     seriesItem.yearReleased,
          //     seriesItem.countryOrigin
          //   );
          // });
        }
      });

      swiperContainer.appendChild(swiperWrapper);
      networkSection.appendChild(logoImg);
      networkSection.appendChild(swiperContainer);
      companiesContainer.appendChild(networkSection);

      // Initialize Swiper
      new Swiper(`#swiper-${networkId}`, {
        slidesPerView: "auto",
        spaceBetween: 20,
        loop: true,
        navigation: {
          nextEl: `.swiper-button-next-${networkId}`,
          prevEl: `.swiper-button-prev-${networkId}`,
        },
        pagination: {
          el: `.swiper-pagination-${networkId}`,
          clickable: true,
        },
      });
    }

    function tamad() {
      const tamadpiktur = document.querySelectorAll("img.lazy-load");

      const observer = new IntersectionObserver(
        (entries, observer) => {
          entries.forEach((entry) => {
            if (entry.isIntersecting) {
              const img = entry.target;
              img.src = img.dataset.src;
              img.classList.remove("lazy-load");
              observer.unobserve(img);
            }
          });
        },
        { threshold: 0.01 }
      );

      tamadpiktur.forEach((Image) => {
        observer.observe(Image);
      });
    }

    landingShows(showlist);
    fetchWeekly();
    companiesLoop();
  </script>
</html>
